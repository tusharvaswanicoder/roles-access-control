"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),t=require("react-router-dom");function r(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var s=r(e);const o=e.createContext(null),n=({allowedRoles:t,permissionsRequired:r})=>{const[s,n]=e.useContext(o),[l,u]=e.useState(!0),[c,i]=e.useState(null),a=e.useCallback((()=>{if(!t.includes(s))return!1;const e=t=>{if("and"===t.type){for(let r of t.permissions){if("object"==typeof r)return e(r);if(!n[s].includes(r))return!1}return!0}for(let r of t.permissions){if("object"==typeof r)return e(r);if(n[s].includes(r))return!0}return!1};return"string"==typeof r?n[s].includes(r):e(r)}),[s,n,t,r]);return e.useEffect((()=>{i(a()),u(!1)}),[s,n,a]),[l,c]};exports.ComponentAccess=({children:e,fallbackComponent:t,allowedRoles:r=[],permissionsRequired:s})=>{const[o,l]=n({allowedRoles:r,permissionsRequired:s});return o?null:l?e:t},exports.RolesAccessControlContext=o,exports.RolesAccessControlContextProvider=({currentUserRole:e,rolesAccesses:t,children:r})=>s.default.createElement(o.Provider,{value:[e,t]},r),exports.RouteAccess=({children:r,fallbackComponent:s,redirectTo:n,allowedRoles:l=[]})=>{const[u]=e.useContext(o),c=t.useNavigate();return e.useEffect((()=>{n&&!l.includes(u)&&c(n)}),[n,c,l,u]),l.includes(u)?r:s},exports.and=(...e)=>({type:"and",permissions:e}),exports.or=(...e)=>({type:"or",permissions:e}),exports.useComponentAccess=n;
